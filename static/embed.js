(function(){"use strict";const a="dentalflo-chatbot-widget-iframe",d="320px",r="450px",s="54px",c={name:"Dentalflo AI Clinic",theme:{textColor:"#FFFFFF",primaryColor:"#6247ff",secondaryColor:"#92afff",backgroundColor:"#FFFFFF"},imageUrl:"https://lh3.googleusercontent.com/fife/ALs6j_FgI6Cl_pNgFYL2Z9nQROCbuqbM8zYKMogilTAk1RrJxpyfUwH_Wep2l_x9xCk16e8CXdsXn0Ul64bVslyaWh70yEzEbvd0fnUPPw5z6vj0Izu9BpLD_LShdrkEZRZEtkpARwPIVQXKWOBHSy1Q9mlP4fKmBs1ELnQVAlTqAQ8Qua1oc3j1DFSf6B-2hFtkJQYdQQa7kBPXh2P7qJ9dX7lyMuQ6PUAN_SmBQY4a8ev3cZ9YKdaky1sYufHXYUj1PP3UDzFi9GF_3Ir6C6Q1nKa_QCrXTq3esmpi0rxmjeMoTAhvmnNm6mHCnIFnQFGuPv_H8dAut8hNKGRvA92DK91IfQBH-PUDa2nSyJW9HtBJ_trJHP1VH1kJJbeghaRKESHu-gLjfBeWEN6WJ9rK8pPw0iqIZiiz8WUeC9PAhvEYdX1pPMxyLLf9fCs_s3AjQTy-gkreeLa-eFsdvYKI8nsP-6qxSRNyz-rFwBWUldI-rig4Xj4IFT_h5F8ayYorCaYuzoiQdDALI6hEKrv3pomtlahtd1GneiD65KcNmLcPRtufmBLydugEzVDAY3H5hQm__Bp-w1b3uOaAFV2WJUyBeb2_J-H1NzoRqZin6aeZCxxpVMoKU7IP7Zi_WPP9HvJcl8E6XrsYBD75N8KqBoZtf3ZnNwyb6BtY_giESb3KsHojnVS1EjVxr1b-Ns7KpHD_vyuLvVTDT7fXUf4XLE_RrBv_72i_UnRXTbg0iNQnZcJxujewADakrrZMUwO6T5BwNvMTdFap6b-UVeRuZyooFJAj4Fy4EWoLC5hVSsPTC_km00OolEP7WHKyaw5XRVPUkKF8-qfT5Ur_-2tVs02NM9yoMy7QLu0aBPfzOv51C0Ych6cT1wuUuXhP7bxls6jcnbbeKp4W_pX_DKf2s-JVhxecDFesBATkprIhR8fZ-4hXOvIFjeO1ljd2cA28nNhSTWNtto0dWIVvoZJ-jZcslg8OzBpEltHBdThcE8OJam-LucP_8xY98AraifXooinZ0ijeJMnQO79NjAqXZwS0dI8pbGBLlJJk043iZN4pj5QvpnU7gqfLelrN_keFvFLmu9-QxGrgHnNsYjoWPk0yxlx2l5VCFKSdzf7hr3Xj8m6ZYyoZpEVVv3AVu6WrFVNQe8aWf6jxcY20hjrIqRcR6ZNAP5Kx2GBudhWOWktfWtA7fPJkpM_bACHVLbnfOkhH2f7l6zYVEkMumcBghX9MQG8AWrCnu_gkbYE7t3onOkO7f4tQRlW5x368h5ztD_CpeTn4kHsnDJuopmM2qJq74hmjE9klXEfDS4QFosGEEzzjklpBBMsPNoQmAcsiLV0BAZ7f8lj0kATcpti9l_stXF5TvFdAUeNrmSbKWW7Lk5vjDqesnBLQ5h7c54XHrx1tA-9gsdY-LtOmuMdDPLloezq6rWaXk5dG7cbjkFQAm-dw38xod0_2M6KftF9-JAq9cKmDD4w8j8PAdUx65siz-9KjYmQUhkXSqwy2NNEbDMJ18hIXNeq7buDMUqaKVobqC44vbzz1ucwR7HC4n2WH3wpVK7HyM-rtlg_23k3wUstgTRNrFmoh1f2Ya11gYsXSnWekd1o1cgLvj04bm05fhLPyPIVlj9OWqKKtjfDok7g209dQklqi=w1920-h945",initialGreeting:"Welcome to Dentalflo AI Clinic! I'm your virtual assistant. How can I help you today?"};function f(){const t=l();if(t&&t.getAttribute("assistantId"))return t.getAttribute("assistantId");if(t&&t.src)try{return new URL(t.src).searchParams.get("assistantId")}catch(e){console.error("Failed to parse script URL:",e)}return null}async function h(t){try{const e=await fetch(`/api/widget-config?assistantId=${t}`);if(!e.ok)throw new Error(`Failed to fetch widget config: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching widget configuration:",e),c}}async function g(){try{if(document.getElementById(a))return console.warn("Dentalflo AI Chatbot Widget is already initialized"),null;const t=l(),e=f();e||console.warn("No assistantId provided. Widget may not function correctly.");let n=c;e&&(n=await h(e));const o=document.createElement("iframe");o.id=a,o.title=n.name||"Dentalflo AI Clinic",o.setAttribute("aria-label",n.name||"Dentalflo AI Clinic Chat Widget"),Object.assign(o.style,{position:"fixed",bottom:"16px",right:"16px",width:d,height:r,border:"none",zIndex:"2147483647",overflow:"hidden",transition:"all 0.3s ease",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",borderRadius:"8px 8px 0 0"});const i=new URL("/widget",(t==null?void 0:t.src)||window.location.href);return i.searchParams.set("t",Date.now().toString()),e&&i.searchParams.set("assistantId",e),i.searchParams.set("config",encodeURIComponent(JSON.stringify(n))),o.src=i.toString(),document.body.appendChild(o),o}catch(t){return console.error("Failed to initialize Dentalflo AI Chatbot Widget:",t),null}}function l(){if(document.currentScript)return document.currentScript;const t=document.getElementsByTagName("script");return t[t.length-1]}function u(t){const e={open:()=>{var n;t&&(t.style.height=r,(n=t.contentWindow)==null||n.postMessage("chatbot-open","*"))},close:()=>{var n;t&&(t.style.height=s,(n=t.contentWindow)==null||n.postMessage("chatbot-close","*"))},toggle:()=>{t&&(e.isOpen()?e.close():e.open())},isOpen:()=>t?t.style.height!==s:!1};return e}(async function(){try{const t=await g(),e=u(t);window.ChatbotWidget=e,window.addEventListener("message",n=>{n.data==="chatbot-widget-loaded"?console.log("Dentalflo AI Chatbot Widget loaded successfully"):n.data==="chatbot-minimize"&&t?t.style.height=s:n.data==="chatbot-expand"&&t&&(t.style.height=r)})}catch(t){console.error("Error initializing Dentalflo AI Chatbot Widget:",t)}})()})();
//# sourceMappingURL=embed.js.map
