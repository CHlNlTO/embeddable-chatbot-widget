(function(){"use strict";const c="dental-chatbot-widget-iframe",g="320px",s="450px",a="52px",d={name:"Dental Support",theme:{textColor:"#FFFFFF",primaryColor:"#FFFFFF",secondaryColor:"#E5E7EB",backgroundColor:"#FFFFFF"},imageUrl:""},u="https://test.smsbot.dentalfloai.dev/widget";function h(){const t=l();if(t&&t.getAttribute("assistantId"))return t.getAttribute("assistantId");if(t&&t.src)try{return new URL(t.src).searchParams.get("assistantId")}catch(e){console.error("Failed to parse script URL:",e)}return null}async function p(t){try{const e=await fetch(`${u}/widget-config?assistantId=${t}`);if(!e.ok)throw new Error(`Failed to fetch widget config: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching widget configuration:",e),d}}async function f(){try{if(document.getElementById(c))return console.warn("Dental Chatbot Widget is already initialized"),null;const t=l(),e=window.location.hostname||"unknown",n=h();n||console.warn("No assistantId provided. Widget may not function correctly.");let i=d;n&&(i=await p(n));const o=document.createElement("iframe");o.id=c,o.title=i.name||"Dental Support Chat",o.setAttribute("aria-label",i.name||"Dental Support Chat Widget"),Object.assign(o.style,{position:"fixed",bottom:"16px",right:"16px",width:g,height:s,border:"none",zIndex:"2147483647",overflow:"hidden",transition:"all 0.3s ease",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",borderRadius:"8px 8px 0 0"});const r=new URL("/widget",(t==null?void 0:t.src)||window.location.href);return r.searchParams.set("domain",e),r.searchParams.set("t",Date.now().toString()),n&&r.searchParams.set("assistantId",n),r.searchParams.set("config",encodeURIComponent(JSON.stringify(i))),o.src=r.toString(),document.body.appendChild(o),o}catch(t){return console.error("Failed to initialize Dental Chatbot Widget:",t),null}}function l(){if(document.currentScript)return document.currentScript;const t=document.getElementsByTagName("script");return t[t.length-1]}function w(t){const e={open:()=>{var n;t&&(t.style.height=s,(n=t.contentWindow)==null||n.postMessage("chatbot-open","*"))},close:()=>{var n;t&&(t.style.height=a,(n=t.contentWindow)==null||n.postMessage("chatbot-close","*"))},toggle:()=>{t&&(e.isOpen()?e.close():e.open())},isOpen:()=>t?t.style.height!==a:!1};return e}(async function(){try{const t=await f(),e=w(t);window.ChatbotWidget=e,window.addEventListener("message",n=>{n.data==="chatbot-widget-loaded"?console.log("Dental Chatbot Widget loaded successfully"):n.data==="chatbot-minimize"&&t?t.style.height=a:n.data==="chatbot-expand"&&t&&(t.style.height=s)})}catch(t){console.error("Error initializing Dental Chatbot Widget:",t)}})()})();
//# sourceMappingURL=embed.js.map
